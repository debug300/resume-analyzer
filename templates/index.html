<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Resume Analyzer</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f5f7fa; }
        .container { width:70%; margin:auto; background:white; padding:25px; border-radius:8px; }
        .bar { background:#e9ecef; border-radius:8px; overflow:hidden; }
        .fill { 
    width: var(--score);
    background: #198754;
    color: white;
    padding: 6px;
    text-align: center;
    border-radius: 8px;
}

        .tag { padding:6px 12px; border-radius:20px; margin:4px; display:inline-block; }
        .green { background:#198754; color:white; }
        .red { background:#dc3545; color:white; }
    </style>
</head>
<body>

<div class="container">
    <h2>ATS-based Resume & Job Description Matching</h2>

    <form method="POST" enctype="multipart/form-data">
        <label>Upload Resume (PDF)</label><br><br>
        <input type="file" name="resume" required><br><br>

        <label>Job Description</label><br><br>
        <textarea name="jd" rows="8" style="width:100%;" required></textarea><br><br>

        <button type="submit">Analyze Resume</button>
    </form>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    {% if score %}
        <hr>
        <h3>ATS Match Score</h3>

        <div class="bar">
            <div class="fill" style="--score: {{ score }}%;">
                {{ score }}%
            </div>

        <h4>Score Breakdown</h4>
        <ul>
            <li><b>Skill Match:</b> {{ skill_score }}%</li>
            <li><b>Content Similarity:</b> {{ similarity_score }}%</li>
            <li><b>Keyword Coverage:</b> {{ keyword_score }}%</li>
        </ul>

        <h4 style="color:green;">Matched Skills</h4>
        {% for s in matched %}
            <span class="tag green">{{ s }}</span>
        {% endfor %}

        <h4 style="color:red;">Missing Skills</h4>
        {% for s in missing %}
            <span class="tag red">{{ s }}</span>
        {% endfor %}
    {% endif %}
</div>

</body>
</html>
